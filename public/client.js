"use strict";!function(){let t;kontra.init();let e={};const n=t=>{const n=kontra.Sprite({type:"player",id:t.id,x:t.x,y:t.y,radius:30,render(){this.context.strokeStyle="black",this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.stroke()}});e[n.id]=n};window.addEventListener("load",function(){t=io({upgrade:!1,transports:["websocket"]});const o=document.querySelector("canvas#ctx").getContext("2d");o.font="30px Roboto",t.on("currentPlayers",t=>{Object.keys(t).forEach(e=>{n(t[e])}),console.log(e)}),t.on("newPlayer",t=>{n(t)}),t.on("disconnect",t=>{delete e[t]}),t.on("newPosition",t=>{o.clearRect(0,0,500,500);for(let n=0;n<t.length;n++){let o=t[n];e[o.id].x=o.x,e[o.id].y=o.y,e[o.id].render()}});const i={68:"right",65:"left",87:"up",83:"down"};document.onkeydown=(e=>{t.emit("keyPress",{inputId:i[e.keyCode],state:!0})}),document.onkeyup=(e=>{t.emit("keyPress",{inputId:i[e.keyCode],state:!1})})},!1)}();